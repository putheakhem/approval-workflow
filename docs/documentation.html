<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation - Laravel Approval Workflow | API Reference & Usage Guide</title>
    <meta name="description" content="Complete documentation for Laravel Approval Workflow package. Build flexible, enterprise-grade approval workflows with detailed examples and API reference.">
    <meta name="language" content="English">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Kantumruy+Pro:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
        }

        .gradient-text {
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        pre code.hljs {
            background: transparent;
            padding: 0;
        }

        pre {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .prose h2 {
            scroll-margin-top: 80px;
        }

        .prose h3 {
            scroll-margin-top: 80px;
        }

        .sidebar-link {
            transition: all 0.2s;
        }

        .sidebar-link.active {
            color: #3b82f6;
            font-weight: 600;
            border-left-color: #3b82f6;
        }

        .khmer-text {
            font-family: 'Kantumruy Pro', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200 fixed w-full z-50 top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="index.html" class="text-2xl font-bold gradient-text">Laravel Approval Workflow</a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition">Home</a>
                    <a href="#" class="text-blue-600 px-3 py-2 rounded-md text-sm font-medium font-semibold">Documentation</a>
                    <a href="https://github.com/putheakhem/approval-workflow" target="_blank" rel="noopener" class="bg-gray-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-800 transition">
                        GitHub
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar -->
            <aside class="lg:w-64 flex-shrink-0">
                <div class="sticky top-24">
                    <nav class="space-y-1">
                        <a href="#introduction" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Introduction</a>
                        <a href="#installation" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Installation</a>
                        <a href="#configuration" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Configuration</a>
                        <a href="#basic-usage" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Basic Usage</a>
                        <a href="#workflow-definitions" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Workflow Definitions</a>
                        <a href="#starting-workflows" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Starting Workflows</a>
                        <a href="#approving-tasks" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Approving Tasks</a>
                        <a href="#api-reference" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">API Reference</a>
                        <a href="#events" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Events</a>
                        <a href="#audit-trail" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">Audit Trail</a>
                        <a href="#sla-support" class="sidebar-link block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md border-l-4 border-transparent">SLA Support</a>
                    </nav>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 max-w-4xl">
                <div class="prose prose-lg max-w-none">
            
                    <!-- Introduction -->
                    <section id="introduction" class="mb-16">
                        <h1 class="text-4xl font-bold text-gray-900 mb-4">Documentation</h1>
                        <p class="text-xl text-gray-600 mb-6">Complete guide to building flexible approval workflows in your Laravel application.</p>
                        
                        <div class="bg-gradient-to-r from-red-50 to-blue-50 border-l-4 border-red-500 p-6 my-6 rounded-r-lg">
                            <div class="text-center">
                                <h3 class="text-2xl font-bold text-gray-900 mb-2">üá∞üá≠ Stand with Cambodia ‚Ä¢ ·ûÄ·ûò·üí·ûñ·ûª·ûá·û∂</h3>
                                <p class="text-xl font-semibold text-gray-800 mb-4">üïäÔ∏è Cambodia Needs Peace üïäÔ∏è</p>
                                <p class="text-gray-700 mb-3 max-w-2xl mx-auto khmer-text">
                                    With heavy hearts, we stand with our brave soldiers defending Cambodia's land and dignity.<br>
                                    We seek no conflict‚Äîonly peace, justice, and respect for our sovereignty.
                                </p>
                                <p class="text-blue-700 font-semibold khmer-text">üôè ·ûÄ·ûò·üí·ûñ·ûª·ûá·û∂·ûè·üí·ûö·ûº·ûú·ûÄ·û∂·ûö·ûü·ûì·üí·ûè·û∑·ûó·û∂·ûñ ‚Ä¢ Together to protect Cambodia's sovereignty.</p>
                            </div>
                        </div>

                        <div class="bg-blue-50 border-l-4 border-blue-600 p-4 my-6">
                            <h3 class="text-lg font-semibold text-blue-900 mb-2">What is Laravel Approval Workflow?</h3>
                            <p class="text-blue-800">A flexible, domain-driven approval workflow engine designed for enterprise Laravel applications. Build multi-step approval processes with role-based assignments, SLA tracking, and comprehensive audit trails.</p>
                        </div>

                        <h2 class="text-2xl font-bold text-gray-900 mt-8 mb-4">Features</h2>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Multiple Workflow Versions:</strong> Define and evolve workflows over time without breaking existing instances</li>
                            <li><strong>Dynamic Assignment:</strong> Assign tasks to users, roles (Spatie Permission integration), or managers</li>
                            <li><strong>Flexible Modes:</strong> Support for 'any' (one person approves) or 'all' (consensus required) modes</li>
                            <li><strong>SLA Monitoring:</strong> Built-in support for task deadlines and breach recording</li>
                            <li><strong>Delegation:</strong> Automatic redirection of tasks based on user availability (vacation/out-of-office)</li>
                            <li><strong>Audit Trail:</strong> Detailed event logging (started, assigned, acted, breached, completed) for every action</li>
                            <li><strong>Conditional Transitions:</strong> Override default flow based on actions (approve/reject/changes_requested)</li>
                            <li><strong>Team / Department Scoping:</strong> Optionally scope workflows, tasks, and approvers by team_id</li>
                            <li><strong>UI & API Agnostic:</strong> No controllers, routes, views, or APIs are enforced. Each application decides how workflows are exposed</li>
                        </ul>
                    </section>

                    <!-- Installation -->
                    <section id="installation" class="mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">Installation</h2>
                        
                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Requirements</h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 mb-6">
                            <li>PHP 8.2 or higher (PHP 8.4+ recommended)</li>
                            <li>Laravel 12.x</li>
                            <li>Composer</li>
                            <li>Spatie Laravel Permission (optional, for role-based assignment)</li>
                        </ul>

                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Step 1: Install via Composer</h3>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-bash">composer require putheakhem/approval-workflow</code></pre>
                        </div>

                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Step 2: Publish Configuration</h3>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-bash">php artisan vendor:publish --tag=approval-workflow-config</code></pre>
                        </div>
                        <p class="text-gray-700 mb-6">This publishes the configuration file to <code class="bg-gray-100 px-2 py-1 rounded">config/approval-workflow.php</code></p>

                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Step 3: Publish Migrations</h3>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-bash">php artisan vendor:publish --tag=approval-workflow-migrations</code></pre>
                        </div>

                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Step 4: Run Migrations</h3>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-bash">php artisan migrate</code></pre>
                        </div>
                    </section>

                    <!-- Configuration -->
                    <section id="configuration" class="mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">Configuration</h2>
                        <p class="text-gray-700 mb-4">The configuration file is published to <code class="bg-gray-100 px-2 py-1 rounded">config/approval-workflow.php</code></p>
                        
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-php">return [
    // Enable SLA checking command
    'sla_command' => env('APPROVAL_WORKFLOW_SLA_COMMAND', false),
    
    // Default SLA hours for approval steps
    'default_sla_hours' => 24,
    
    // Team scoping
    'enable_team_scoping' => true,
];</code></pre>
                        </div>
                    </section>

                    <!-- Basic Usage -->
                    <section id="basic-usage" class="mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">Basic Usage</h2>
                        
                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Make a Model Approvable</h3>
                        <p class="text-gray-700 mb-4">Use the <code class="bg-gray-100 px-2 py-1 rounded">HasWorkflow</code> trait on any Eloquent model:</p>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-php">use PutheaKhem\ApprovalWorkflow\Concerns\HasWorkflow;

class Term extends Model
{
    use HasWorkflow;
}</code></pre>
                        </div>

                        <div class="bg-yellow-50 border-l-4 border-yellow-600 p-4 my-6">
                            <h4 class="text-lg font-semibold text-yellow-900 mb-2">‚ö†Ô∏è What This Package Does Not Do</h4>
                            <ul class="text-yellow-800 list-disc list-inside space-y-1">
                                <li>Controllers or API routes</li>
                                <li>UI or view components</li>
                                <li>Notification delivery</li>
                            </ul>
                            <p class="text-yellow-800 mt-2 text-sm">These concerns are intentionally handled by the consuming application.</p>
                        </div>
                    </section>

                    <!-- Workflow Definitions -->
                    <section id="workflow-definitions" class="mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">Workflow Definitions</h2>
                        <p class="text-gray-700 mb-4">Define workflows using PHP arrays or JSON format with versioning support:</p>
                        
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-php">[
    'steps' => [
        ['key' => 'start', 'type' => 'start', 'next' => 'review'],
        [
            'key' => 'review',
            'type' => 'approval',
            'mode' => 'any',
            'sla_hours' => 24,
            'assignment' => [
                'type' => 'role',
                'roles' => ['reviewer'],
            ],
            'next' => 'end',
        ],
        ['key' => 'end', 'type' => 'end'],
    ],
    'transitions' => [
        ['from' => 'review', 'on' => 'reject', 'to' => 'end'],
    ],
]</code></pre>
                        </div>
                    </section>

                            <!-- Starting Workflows -->
                    <section id="starting-workflows" class="mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">Starting Workflows</h2>
                        <p class="text-gray-700 mb-4">Initialize a workflow instance for your subject model:</p>
                        
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-php">$instance = $service->startWorkflow(
    workflowKey: 'service-approval',
    context: [
        'team_id' => 1,
        'requester_id' => auth()->id(),
    ],
    teamId: 1,
    startedBy: auth()->id(),
);</code></pre>
                        </div>
                    </section>

                    <!-- Approving Tasks -->
            <section id="approving-tasks" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Approving & Rejecting Tasks</h2>
                
                <h3 class="text-xl font-semibold text-gray-900 mb-3">Approve</h3>
                <div class="bg-gray-900 rounded-lg p-4 mb-6">
                    <pre><code class="hljs language-php">use PutheaKhem\ApprovalWorkflow\Services\ApprovalService;

$approval = app(ApprovalService::class);

$approval->approve(
    instance: $instance,
    taskId: $taskId,
    userId: auth()->id(),
    notes: 'Approved with conditions'
);</code></pre>
                </div>

                <h3 class="text-xl font-semibold text-gray-900 mb-3 mt-6">Reject</h3>
                <div class="bg-gray-900 rounded-lg p-4 mb-6">
                    <pre><code class="hljs language-php">$approval->reject(
    instance: $instance,
    taskId: $taskId,
    userId: auth()->id(),
    notes: 'Missing required documents'
);</code></pre>
                </div>

                <h3 class="text-xl font-semibold text-gray-900 mb-3 mt-6">Request Changes</h3>
                <div class="bg-gray-900 rounded-lg p-4 mb-6">
                    <pre><code class="hljs language-php">$approval->requestChanges(
    instance: $instance,
    taskId: $taskId,
    userId: auth()->id(),
    notes: 'Please provide additional details'
);</code></pre>
                </div>
            </section>

            <!-- API Reference -->
            <section id="api-reference" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">API Reference</h2>
                <p class="text-gray-600 mb-8">Complete list of available services and methods.</p>
                
                <div class="space-y-4">
                    <!-- WorkflowEngine Service -->
                    <div class="bg-white border-l-4 border-blue-500 shadow-sm hover:shadow-md transition">
                        <div class="p-5">
                            <div class="flex items-start justify-between mb-3">
                                <h4 class="text-base font-mono font-bold text-blue-600">WorkflowEngine::start()</h4>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-semibold">Public</span>
                            </div>
                            <p class="text-gray-700 text-sm mb-4">Starts a new workflow instance for the given subject.</p>
                            <div class="mb-3">
                                <span class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Parameters</span>
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$subject</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">Model</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Eloquent model to attach workflow</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$workflowKey</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">string</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Workflow definition key</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$context</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">array</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Workflow context data</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$teamId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">?int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Team ID for scoping</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$startedBy</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">?int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">User ID who started workflow</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded text-sm">
                                <span class="font-semibold text-gray-700">Returns:</span>
                                <code class="text-blue-600 ml-1">WorkflowInstance</code>
                            </div>
                        </div>
                    </div>

                    <!-- ApprovalService::approve -->
                    <div class="bg-white border-l-4 border-blue-500 shadow-sm hover:shadow-md transition">
                        <div class="p-5">
                            <div class="flex items-start justify-between mb-3">
                                <h4 class="text-base font-mono font-bold text-blue-600">ApprovalService::approve()</h4>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-semibold">Public</span>
                            </div>
                            <p class="text-gray-700 text-sm mb-4">Approves a workflow task.</p>
                            <div class="mb-3">
                                <span class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Parameters</span>
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$instance</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">WorkflowInstance</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Workflow instance</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$taskId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Task ID to approve</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$userId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">User ID performing approval</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$notes</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">?string</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Optional approval notes</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded text-sm">
                                <span class="font-semibold text-gray-700">Returns:</span>
                                <code class="text-blue-600 ml-1">void</code>
                            </div>
                        </div>
                    </div>

                    <!-- ApprovalService::reject -->
                    <div class="bg-white border-l-4 border-blue-500 shadow-sm hover:shadow-md transition">
                        <div class="p-5">
                            <div class="flex items-start justify-between mb-3">
                                <h4 class="text-base font-mono font-bold text-blue-600">ApprovalService::reject()</h4>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-semibold">Public</span>
                            </div>
                            <p class="text-gray-700 text-sm mb-4">Rejects a workflow task.</p>
                            <div class="mb-3">
                                <span class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Parameters</span>
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$instance</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">WorkflowInstance</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Workflow instance</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$taskId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Task ID to reject</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$userId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">User ID performing rejection</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$notes</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">?string</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Optional rejection notes</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded text-sm">
                                <span class="font-semibold text-gray-700">Returns:</span>
                                <code class="text-blue-600 ml-1">void</code>
                            </div>
                        </div>
                    </div>

                    <!-- ApprovalService::requestChanges -->
                    <div class="bg-white border-l-4 border-blue-500 shadow-sm hover:shadow-md transition">
                        <div class="p-5">
                            <div class="flex items-start justify-between mb-3">
                                <h4 class="text-base font-mono font-bold text-blue-600">ApprovalService::requestChanges()</h4>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-semibold">Public</span>
                            </div>
                            <p class="text-gray-700 text-sm mb-4">Requests changes on a workflow task.</p>
                            <div class="mb-3">
                                <span class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Parameters</span>
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$instance</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">WorkflowInstance</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Workflow instance</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$taskId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Task ID for change request</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$userId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">User ID requesting changes</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$notes</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">?string</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Required change description</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded text-sm">
                                <span class="font-semibold text-gray-700">Returns:</span>
                                <code class="text-blue-600 ml-1">void</code>
                            </div>
                        </div>
                    </div>

                    <!-- DelegationService::delegate -->
                    <div class="bg-white border-l-4 border-blue-500 shadow-sm hover:shadow-md transition">
                        <div class="p-5">
                            <div class="flex items-start justify-between mb-3">
                                <h4 class="text-base font-mono font-bold text-blue-600">DelegationService::delegate()</h4>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-semibold">Public</span>
                            </div>
                            <p class="text-gray-700 text-sm mb-4">Delegates approval authority to another user.</p>
                            <div class="mb-3">
                                <span class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Parameters</span>
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$fromUserId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Delegating user ID</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$toUserId</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">int</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Delegate user ID</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$validFrom</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">Carbon</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Delegation start date</span>
                                    </div>
                                    <div class="flex items-start bg-gray-50 px-3 py-2 rounded">
                                        <code class="text-purple-600 font-semibold">$validUntil</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <code class="text-blue-600">Carbon</code>
                                        <span class="mx-2 text-gray-400">‚Ä¢</span>
                                        <span class="text-gray-600 text-xs">Delegation end date</span>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-50 px-3 py-2 rounded text-sm">
                                <span class="font-semibold text-gray-700">Returns:</span>
                                <code class="text-blue-600 ml-1">Delegation</code>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Events -->
            <section id="events" class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Events</h2>
                <p class="text-gray-600 mb-6">The package emits the following domain events:</p>
                
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                            <div>
                                <code class="text-sm font-mono text-gray-900">WorkflowStarted</code>
                                <p class="text-sm text-gray-600">Fired when a workflow instance is created</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                            <div>
                                <code class="text-sm font-mono text-gray-900">TaskAssigned</code>
                                <p class="text-sm text-gray-600">Fired when a task is assigned to users</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                            <div>
                                <code class="text-sm font-mono text-gray-900">TaskApproved</code>
                                <p class="text-sm text-gray-600">Fired when a task is approved</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                            <div>
                                <code class="text-sm font-mono text-gray-900">TaskRejected</code>
                                <p class="text-sm text-gray-600">Fired when a task is rejected</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                            <div>
                                <code class="text-sm font-mono text-gray-900">WorkflowCompleted</code>
                                <p class="text-sm text-gray-600">Fired when a workflow completes</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                            <div>
                                <code class="text-sm font-mono text-gray-900">SlaBreached</code>
                                <p class="text-sm text-gray-600">Fired when SLA deadline is exceeded</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </section>

                    <!-- Audit Trail -->
                    <section id="audit-trail" class="mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">Audit Trail</h2>
                        <p class="text-gray-700 mb-4">
                            All workflow actions are recorded in the <code class="bg-gray-100 px-2 py-1 rounded">workflow_events</code> table for transparency and compliance.
                        </p>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-3">Event Types</h3>
                            <ul class="space-y-2">
                                <li class="flex items-start">
                                    <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                                    <code class="text-sm font-mono text-gray-900">workflow_started</code>
                                </li>
                                <li class="flex items-start">
                                    <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                                    <code class="text-sm font-mono text-gray-900">task_created</code>
                                </li>
                                <li class="flex items-start">
                                    <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                                    <code class="text-sm font-mono text-gray-900">task_assigned</code>
                                </li>
                                <li class="flex items-start">
                                    <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                                    <code class="text-sm font-mono text-gray-900">assignee_acted</code>
                                </li>
                                <li class="flex items-start">
                                    <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                                    <code class="text-sm font-mono text-gray-900">task_finished</code>
                                </li>
                                <li class="flex items-start">
                                    <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                                    <code class="text-sm font-mono text-gray-900">workflow_completed</code>
                                </li>
                                <li class="flex items-start">
                                    <span class="inline-block w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3"></span>
                                    <code class="text-sm font-mono text-gray-900">sla_breached</code>
                                </li>
                            </ul>
                        </div>
                    </section>

                    <!-- SLA Support -->
                    <section id="sla-support" class="mb-16">
                        <h2 class="text-3xl font-bold text-gray-900 mb-6">SLA Support</h2>
                        <p class="text-gray-700 mb-4">Enable SLA checking to monitor approval deadlines.</p>
                        
                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Enable SLA Command</h3>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-bash">APPROVAL_WORKFLOW_SLA_COMMAND=true</code></pre>
                        </div>

                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Run SLA Check</h3>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-bash">php artisan workflow:check-sla</code></pre>
                        </div>

                        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Schedule in Kernel</h3>
                        <div class="bg-gray-900 rounded-lg p-4 mb-6">
                            <pre><code class="hljs language-php">// In routes/console.php or app/Console/Kernel.php
Schedule::command('workflow:check-sla')->hourly();</code></pre>
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p class="text-gray-400 mb-4">&copy; 2025 Laravel Approval Workflow. Licensed under MIT License.</p>
                <p class="text-gray-400">Built with ‚ù§Ô∏è by <a href="mailto:puthea.khem@gmail.com" class="text-blue-400 hover:text-blue-300">Puthea Khem</a></p>
                <div class="mt-4">
                    <a href="https://www.buymeacoffee.com/iamputhea" target="_blank" rel="noopener" class="text-blue-400 hover:text-blue-300">Buy me a coffee ‚òï</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script>
        hljs.highlightAll();

        // Update active sidebar link on scroll
        const sections = document.querySelectorAll('section[id]');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            sidebarLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>